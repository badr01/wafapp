<h1 class="cover-heading ng-scope">Journalisation acc√®s</h1>
<hr>
<div ng-controller="paginationCtrl">
  <div >
    <div class="row" ng-controller="DatepickerCtrl">
      <div class="col-md-3">

        <p class="input-group">
          <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="dtFrom" is-open="opened1"
                 placeholder="Logs from date" datepicker-options="dateOptions" ng-required="true" close-text="Close" />
              <span class="input-group-btn">
                <button type="button" class="btn btn-default" ng-click="open($event,'opened1')"><i
                  class="glyphicon glyphicon-calendar"></i></button>
              </span>
        </p>
      </div>
      <div class="col-md-3">

        <p class="input-group">
          <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="dtTo" is-open="opened2"
                 placeholder="Logs to date" datepicker-options="dateOptions" ng-required="true" close-text="Close" />
              <span class="input-group-btn">
                <button type="button" class="btn btn-default" ng-click="open($event,'opened2')"><i
                  class="glyphicon glyphicon-calendar"></i></button>
              </span>
        </p>
      </div>
      <div class="col-md-2">
        <a class="btn btn-primary btn-sm" ng-click="getLog()" role="button"><span
          class="glyphicon glyphicon-download"></span>Get logs</a>
        </p>
      </div>
    </div>
    <table  style=" border:2px solid #ddd;" st-table="displayCollection" st-safe-src="rowCollection"
           class="table table-striped ">
      <thead>
      <tr>
        <th colspan="2"><select class="form-control" id="predicate" ng-model="selectedPredicate"
                                ng-options="predicate.value as predicate.key for predicate in predicates"></select></th>

        <th colspan="9"><input class="form-control" placeholder="Filter..." st-search="{{selectedPredicate}}"/></th>

      </tr>
      <tr>
        <th class="sortable" st-sort="time">Request time</th>
        <th class="sortable" st-sort="host">Host</th>
        <th class="sortable" st-sort="client_ip">User IP</th>
        <th class="sortable" st-sort="client">User</th>
        <th class="sortable" st-sort="path">URI Path</th>
        <th class="sortable" st-sort="method">Method</th>
        <th class="sortable" st-sort="code">HTTP Status</th>
        <th class="sortable" st-sort="referer">Referer</th>
        <th class="sortable" st-sort="size">Bytes</th>
        <th class="sortable" st-sort="x_forwarded_for">X Forwarded For</th>
        <th class="sortable" st-sort="user_agent">User Agent</th>
      </tr>

      </thead>
      <tbody>
      <tr ng-repeat="row in displayCollection">
        <td class="tdflow" >{{row.time}}</td>
        <td class="tdflow">{{row.host }}</td>
        <td class="tdflow">{{row.client_ip }}</td>
        <td class="tdflow">{{row.client}}</td>
        <td class="tdflow">{{row.path}}</td>
        <td class="tdflow">{{row.method}}</td>
        <td class="tdflow">{{row.code }}</td>
        <td class="tdflow">{{row.referer }}</td>
        <td class="tdflow">{{row.size}}</td>
        <td class="tdflow">{{row.x_forwarded_for}}</td>
        <td class="tdflow" ><button class="btn btn-sm" popover-placement="left"  popover="{{row.user_agent}}"><span class="glyphicon glyphicon-search"></span></button></td>
      </tr>
      </tbody>
      <tfoot>
      <tr>
        <td colspan="11" class="text-center">
          <div st-pagination="" st-items-by-page="itemsByPage" st-displayed-pages="10"></div>
        </td>
      </tr>
      </tfoot>
    </table>
  </div>
</div>
